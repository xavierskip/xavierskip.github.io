---
layout: post
title: å¦‚ä½•ä½¿ç”¨ keepass å¯†ç ç®¡ç†å™¨ä½œä¸ºä½ çš„ä¸¤æ­¥éªŒè¯å™¨
tags:
 - software
 - password
---

> ğŸš¨âš è­¦å‘Šï¼šæŠŠå¯†ç å’Œ OTP secret key ä¿å­˜åœ¨ä¸€èµ·æœ‰æ‚–ã€ŒäºŒæ¬¡éªŒè¯ã€çš„ç›®çš„ï¼

# ä»€ä¹ˆæ˜¯ä¸¤æ­¥éªŒè¯ 2FA

ä¸€èˆ¬çš„è´¦æˆ·ç™»å½•æ˜¯æ ¹æ®**ç”¨æˆ·å**å’Œ**å¯†ç **æ¥ç™»å½•ï¼Œä¸¤æ­¥éªŒè¯æ˜¯æŒ‡åœ¨**ç”¨æˆ·åã€å¯†ç **çš„éªŒè¯åå¦å¤–å†åŠ çš„ä¸€é“éªŒè¯å£ä»¤ï¼Œè¿™ç§å£ä»¤é€šå¸¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå¸¸è§çš„2FAæ–¹å¼å°±æ˜¯é€šè¿‡æ‰‹æœºæ¥æ”¶éªŒè¯ç æ¥éªŒè¯ï¼ˆä¹Ÿæœ‰é€šè¿‡éªŒè¯ç ç›´æ¥ç™»å½•ï¼‰ã€‚

ä¸è¿‡æœ¬æ–‡é‡Œæåˆ°ä¸¤æ­¥éªŒè¯æ˜¯æŒ‡ **åŸºäºæ—¶é—´çš„ä¸€æ¬¡æ€§å¯†ç ** TOTPã€‚TOTP æ˜¯ä¸€ç§æ ¹æ®é¢„å…±äº«çš„å¯†é’¥ä¸å½“å‰æ—¶é—´è®¡ç®—ä¸€æ¬¡æ€§å¯†ç çš„ç®—æ³•ï¼Œåç§°å¾ˆæ¸…æ™°çš„å‘Šè¯‰æˆ‘ä»¬äº†ï¼Œè¿™æ˜¯ä¸€ç§æ ¹æ®æ ¹æ®æ—¶é—´ä¸æ–­å˜åŒ–çš„å¯†ç ã€‚

å¦‚æœéœ€è¦è®¾ç½® 2FAï¼Œä¼šç»™ä½ æä¾›ä¸€ä¸ªäºŒç»´ç ï¼Œå¦‚æœæ²¡æœ‰äºŒç»´ç ä¼šç»™ä½ æä¾›ä¸€ä¸ªå£ä»¤ï¼ŒéªŒè¯å™¨è¯†åˆ«åï¼Œå°±ä¼šç”Ÿæˆç›¸åº”çš„å¯†ç ï¼Œç”¨äºä¸¤æ­¥éªŒè¯ã€‚

è¿™é‡Œçš„äºŒç»´ç ï¼Œä½ è§£ç åä¼šå‘ç°å°±æ˜¯ä¸€ä¸²å­—ç¬¦ã€ä¸€ä¸ª URIï¼Œç±»ä¼¼å¦‚ä¸‹[^1]ï¼š

```
otpauth://totp/ietfuser?secret=NBSWY3DP
```

![otpauth](https://f.skip2.top/i/f52e3e6455434ef477217050123e3039d1431aa946a38c7172fc626a47d34ca9.png)

# ä¸ºä»€ä¹ˆä½¿ç”¨ keepass å¯†ç ç®¡ç†å™¨

å¸‚é¢ä¸Šæœ‰é‚£ä¹ˆå¤šç§å¯†ç ç®¡ç†å™¨ï¼Œä¸ºä»€ä¹ˆè¦é€‰æ‹© keepassã€‚å› ä¸ºå¯†ç æ–‡ä»¶æ˜¯é‡è¦æ•°æ®ï¼Œç»ä¸èƒ½ä¸¢å¤±çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æ•°æ®å¤‡ä»½éå¸¸é‡è¦ï¼Œä½ å¯ä¸æƒ³ä½ çš„å¯†ç æ–‡ä»¶åªæœ‰ä¸€ä»½ï¼Œè€Œä½ æ²¡æœ‰å¤‡ä»½æˆ–è€…ä½ çš„å¤‡ä»½æ‰‹æ®µå¤±æ•ˆåå¯†ç æ–‡ä»¶æŸååçš„æ‚²æƒ¨ç»“å±€å§ã€‚å¯†ç ç®¡ç†å™¨ä¸ä¸€å®šèƒ½åšå¥½å¤‡ä»½çš„äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¯»å–æœ¬åœ°æ–‡ä»¶ä½œä¸ºå¯†ç æ–‡ä»¶çš„å¯†ç ç®¡ç†å™¨ï¼Œè¿™æ ·æˆ‘ä»¬æœ‰å‡ ä¸ªè®¾å¤‡å®‰è£…äº†å¯†ç ç®¡ç†å™¨å°±æœ‰å‡ ä»½å¯†ç æ–‡ä»¶è¢«ä¿å­˜åœ¨æœ¬åœ°ï¼Œè¿™æ ·åœ¨å½¢å¼ä¸Šä¸å°±æ˜¯åˆ†å¸ƒå¼å­˜å‚¨å—ï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­é¡ºä¾¿å°±å·²ç»å®Œæˆäº†å¤‡ä»½æ–‡ä»¶åˆ°ä¸åŒåœ°æ–¹çš„æ“ä½œã€‚

> ä½†åœ¨å®é™…ä¸Šæˆ‘è¿˜æ˜¯ä½¿ç”¨ WebDAV æ¥ä¿è¯å¯†ç æ–‡ä»¶çš„åŒæ­¥ã€‚

# å¦‚ä½•ä½¿ç”¨

ä¸€èˆ¬æ¥è¯´ï¼Œå¹³å°ä¼šå‘Šè¯‰ä½ ä¸€ä¸ªäºŒç»´ç ï¼Œä½ ä½¿ç”¨éªŒè¯å™¨è½¯ä»¶ï¼ˆä¸€èˆ¬æ˜¯ç§»åŠ¨è®¾å¤‡è½¯ä»¶ï¼‰æ‰«æäºŒç»´ç å³å¯ï¼Œç„¶åå°†ç”Ÿæˆçš„éªŒè¯ç æäº¤å³å¯å®Œæˆ 2FA çš„è®¾ç½®ã€‚

è¦å°† Windows å¹³å°ä¸Šçš„ keepass å®¢æˆ·ç«¯[^2] å½“ä½œéªŒè¯å™¨ä¸€æ ·ä½¿ç”¨ï¼Œéœ€è¦å°†å¹³å°ç»™å®šäºŒç»´ç è§£ç æˆæ–‡æœ¬ã€‚åœ¨ **ç¼–è¾‘è®°å½•** > **å·¥å…·** > **å¯¼å…¥â€˜otpauth://â€™ç½‘å€** ä¸­æ·»åŠ å³å¯ã€‚

![ç¼–è¾‘è®°å½• > å·¥å…· > å¯¼å…¥â€˜otpauth://â€™ç½‘å€](https://f.skip2.top/i/433d4da829e3c87cb28d5557a5c7d3051650849158eca4ecca64f8e12e840974.jpg)

è¿™ä¼šåœ¨æ­¤è®°å½•çš„ **é«˜çº§** > **è‡ªå®šä¹‰å­—æ®µ** æ·»åŠ ä¸€ä¸ªåç§°ä¸º TimeOtp-Secret-Base32 çš„å­—æ®µã€‚

è¦è·å–éªŒè¯ç åªéœ€è¦å³é”®ç‚¹å‡»è®°å½•ï¼Œåœ¨ **å…¶ä»–æ•°æ®** ä¸­ é€‰æ‹© **å¤åˆ¶åŸºäºæ—¶é—´æˆ³çš„OTP** å³å¯ã€‚ï¼ˆå¿«æ·é”®`ctrl+T`ï¼‰

![å¤åˆ¶åŸºäºæ—¶é—´æˆ³çš„OTP](https://f.skip2.top/i/6fa5b11e5b29279c216ac8f170ae91c705aa465463abdb6d90ee8d19a665c0ce.jpg)

å¦‚æœåœ¨ç§»åŠ¨ç«¯ä½ ä½¿ç”¨ Keepass2Android[^3] è¿™æ¬¾å®¢æˆ·ç«¯ï¼Œé€šè¿‡æ­¤æ–¹å¼è®¾ç½®çš„ä¸¤æ­¥éªŒè¯ï¼Œä½ ä¹Ÿèƒ½å¾ˆæ–¹ä¾¿çš„çœ‹åˆ° TOTP éªŒè¯ç ã€‚é‰´äºæ­¤è½¯ä»¶çš„å®‰å…¨ç­–ç•¥ï¼Œæ— æ³•åšåˆ°åœ¨æ‰‹æœºä¸Šæˆªå›¾ï¼ˆå¦‚æœä½ çŸ¥é“è¯·å‘Šè¯‰æˆ‘ï¼‰ï¼Œæ‰€ä»¥æ²¡æœ‰å›¾ç‰‡å±•ç¤ºã€‚

ä¸Šé¢æåˆ°äº† Windows å’Œ Android ä¸Šçš„å®¢æˆ·ç«¯ï¼Œå¦‚æœä½ çŸ¥é“åœ¨å…¶ä»–ç³»ç»Ÿå¹³å°ä¸Šå¥½ç”¨çš„å®¢æˆ·ç«¯ä¹Ÿè¯·å‘Šè¯‰æˆ‘ï¼ğŸ™ŒğŸ‘€ğŸ”


[^1]:[Usage specification of the otpauth URI format for TOTP and HOTP token generators](https://www.ietf.org/archive/id/draft-linuxgemini-otpauth-uri-00.html)
[^2]:[KeePass 2.58](https://keepass.info/download.html)
[^3]:[Keepass2Android](https://github.com/PhilippC/keepass2android)
